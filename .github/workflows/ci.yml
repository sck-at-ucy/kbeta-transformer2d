name: CI
on: [push, pull_request]

jobs:
  test:
    runs-on: macos-14          # Metal / MLX
    steps:
      - uses: actions/checkout@v4          # checkout THIS repo

      # checkout the private dependency repo
      - uses: actions/checkout@v4
        with:
          repository: sck-at-ucy/kbeta
          token: ${{ secrets.KBETA_NEW }}     # ‚Üê add this line
          path: kbeta

      - uses: actions/setup-python@v5
        with: {python-version: '3.11'}

      - run: python -m pip install --upgrade pip
      - run: pip install -e ./kbeta[dev]   # install dependency
      - run: pip install -e ".[dev]"       # install project under test
      - run: python -m pytest -q
